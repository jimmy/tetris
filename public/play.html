<html>
  <head>
    <script src='/javascript/jquery-1.4.2.min.js'></script>
    <script type='text/javascript'>
      var tetris = function() {

        var renderer = function(drawingCanvas) {
          var t = function(x) {
            return x * 14;
          };

          var context = null;
          if (drawingCanvas.getContext) {
            context = drawingCanvas.getContext('2d');
          }

          var x_offset = 10;
          var y_offset = 10;

          var render_stage = function(stage) {
            context.fillStyle   = '#ccc';
            context.strokeStyle = '#000';
            context.lineWidth   = 4;

            context.fillRect(x_offset, y_offset, t(stage.width), t(stage.height));
            context.strokeRect(x_offset, y_offset, t(stage.width), t(stage.height));
          }

          var render_square = function(square) {
            context.fillStyle   = '#ff0';
            context.strokeStyle = '#000';
            context.lineWidth   = 4;

            context.fillRect(x_offset + t(square.x), y_offset + t(square.y), t(square.width), t(square.height));
            context.strokeRect(x_offset + t(square.x), y_offset + t(square.y), t(square.width), t(square.height));
          };

          return {
            render_stage: render_stage,
            render_square: render_square
          };
        };

        var stage = function() {
          var width = 12;
          var height = 36;

          return {
            width: width,
            height: height
          };
        }();

        var peices = function() {
          var square = function(x, y) {
            var width = 2;
            var height = 2;

            return {
              x: x,
              y: y,
              width: width,
              height: height
            };
          };

          return {
            square: square
          };
        }();

        return {
          stage: stage,
          peices: peices,
          renderer: renderer
        }
      }();

      $().ready(function(){
        var drawingCanvas = document.getElementById('tetris');
        var renderer = tetris.renderer(drawingCanvas);
        renderer.render_stage(tetris.stage);
        renderer.render_square(tetris.peices.square(5, 0));
      });
    </script>
  </head>
  <body>
    <canvas id='tetris' width='800' height='600'>
    </canvas>
  </body>
</html>
